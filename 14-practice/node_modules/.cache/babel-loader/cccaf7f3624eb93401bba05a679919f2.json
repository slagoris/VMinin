{"remainingRequest":"/Users/slag/Documents/GitHub/VMinin/14-practice/node_modules/babel-loader/lib/index.js!/Users/slag/Documents/GitHub/VMinin/14-practice/src/use/login-form.js","dependencies":[{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice/src/use/login-form.js","mtime":1657109094475},{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice/node_modules/cache-loader/dist/cjs.js","mtime":1656919257525},{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice/node_modules/babel-loader/lib/index.js","mtime":1656919258082}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3NsYWcvRG9jdW1lbnRzL0dpdEh1Yi9WTWluaW4vMTQtcHJhY3RpY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyB1c2VGaWVsZCwgdXNlRm9ybSB9IGZyb20gInZlZS12YWxpZGF0ZSI7CmltcG9ydCAqIGFzIHl1cCBmcm9tICJ5dXAiOwppbXBvcnQgeyBjb21wdXRlZCwgd2F0Y2ggfSBmcm9tICJ2dWUiOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKZXhwb3J0IGZ1bmN0aW9uIHVzZUxvZ2luRm9ybSgpIHsKICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKCiAgdmFyIF91c2VGb3JtID0gdXNlRm9ybSgpLAogICAgICBoYW5kbGVTdWJtaXQgPSBfdXNlRm9ybS5oYW5kbGVTdWJtaXQsCiAgICAgIGlzU3VibWl0dGluZyA9IF91c2VGb3JtLmlzU3VibWl0dGluZywKICAgICAgc3VibWl0Q291bnQgPSBfdXNlRm9ybS5zdWJtaXRDb3VudDsKCiAgdmFyIF91c2VGaWVsZCA9IHVzZUZpZWxkKCdlbWFpbCcsIHl1cC5zdHJpbmcoKS50cmltKCkucmVxdWlyZWQoJ0UtbWFpbCDQvtCx0Y/Qt9Cw0YLQtdC70LXQvScpLmVtYWlsKCfQo9C60LDQttC40YLQtSDQutC+0YDRgNC10LrRgtC90YvQuSBFLW1haWwnKSksCiAgICAgIGVtYWlsID0gX3VzZUZpZWxkLnZhbHVlLAogICAgICBlRXJyb3IgPSBfdXNlRmllbGQuZXJyb3JNZXNzYWdlLAogICAgICBlQmx1ciA9IF91c2VGaWVsZC5oYW5kbGVCbHVyOwoKICB2YXIgTUlOX0xFTkdUSCA9IDY7CgogIHZhciBfdXNlRmllbGQyID0gdXNlRmllbGQoJ3Bhc3N3b3JkJywgeXVwLnN0cmluZygpLnRyaW0oKS5yZXF1aXJlZCgn0J/QsNGA0L7Qu9GMINC+0LHRj9C30LDRgtC10LvQtdC9JykubWluKE1JTl9MRU5HVEgsICJcdTA0MUZcdTA0MzBcdTA0NDBcdTA0M0VcdTA0M0JcdTA0NEMgXHUwNDNEXHUwNDM1IFx1MDQzQ1x1MDQzNVx1MDQzRFx1MDQzNVx1MDQzNSAiLmNvbmNhdChNSU5fTEVOR1RILCAiIFx1MDQ0MVx1MDQzOFx1MDQzQ1x1MDQzMlx1MDQzRVx1MDQzQlx1MDQzRVx1MDQzMiIpKSksCiAgICAgIHBhc3N3b3JkID0gX3VzZUZpZWxkMi52YWx1ZSwKICAgICAgcEVycm9yID0gX3VzZUZpZWxkMi5lcnJvck1lc3NhZ2UsCiAgICAgIHBCbHVyID0gX3VzZUZpZWxkMi5oYW5kbGVCbHVyOwoKICB2YXIgaXNUb01hbnlBdHRlbXB0cyA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBzdWJtaXRDb3VudC52YWx1ZSA+PSAzOwogIH0pOwogIHdhdGNoKGlzVG9NYW55QXR0ZW1wdHMsIGZ1bmN0aW9uICh2YWwpIHsKICAgIGlmICh2YWwpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgc3VibWl0Q291bnQudmFsdWUgPSAwOwogICAgICB9LCAzMDAwKTsKICAgIH0KICB9KTsKICB2YXIgb25TdWJtaXQgPSBoYW5kbGVTdWJtaXQoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh2YWx1ZXMpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3JtOicsIHZhbHVlcyk7CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhdXRoL2xvZ2luJywgdmFsdWVzKTsKCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgN11dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKSk7CiAgcmV0dXJuIHsKICAgIGVtYWlsOiBlbWFpbCwKICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgIGVFcnJvcjogZUVycm9yLAogICAgcEVycm9yOiBwRXJyb3IsCiAgICBlQmx1cjogZUJsdXIsCiAgICBwQmx1cjogcEJsdXIsCiAgICBvblN1Ym1pdDogb25TdWJtaXQsCiAgICBpc1N1Ym1pdHRpbmc6IGlzU3VibWl0dGluZywKICAgIHN1Ym1pdENvdW50OiBzdWJtaXRDb3VudCwKICAgIGlzVG9NYW55QXR0ZW1wdHM6IGlzVG9NYW55QXR0ZW1wdHMsCiAgICBzdG9yZTogc3RvcmUKICB9Owp9"},{"version":3,"sources":["/Users/slag/Documents/GitHub/VMinin/14-practice/src/use/login-form.js"],"names":["useField","useForm","yup","computed","watch","useStore","useRouter","useLoginForm","store","router","handleSubmit","isSubmitting","submitCount","string","trim","required","email","value","eError","errorMessage","eBlur","handleBlur","MIN_LENGTH","min","password","pError","pBlur","isToManyAttempts","val","setTimeout","onSubmit","values","console","log","dispatch","push"],"mappings":";;;;AAAA,SAAQA,QAAR,EAAkBC,OAAlB,QAAgC,cAAhC;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAAQC,QAAR,EAAkBC,KAAlB,QAA8B,KAA9B;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,SAAT,QAA0B,YAA1B;AAEA,OAAO,SAASC,YAAT,GAAwB;AAC9B,MAAMC,KAAK,GAAGH,QAAQ,EAAtB;AACA,MAAMI,MAAM,GAAGH,SAAS,EAAxB;;AAF8B,iBAGsBL,OAAO,EAH7B;AAAA,MAGtBS,YAHsB,YAGtBA,YAHsB;AAAA,MAGRC,YAHQ,YAGRA,YAHQ;AAAA,MAGMC,WAHN,YAGMA,WAHN;;AAAA,kBAIoCZ,QAAQ,CACxE,OADwE,EAExEE,GAAG,CACAW,MADH,GAEGC,IAFH,GAGGC,QAHH,CAGY,mBAHZ,EAIGC,KAJH,CAIS,2BAJT,CAFwE,CAJ5C;AAAA,MAIfA,KAJe,aAItBC,KAJsB;AAAA,MAIMC,MAJN,aAIRC,YAJQ;AAAA,MAI0BC,KAJ1B,aAIcC,UAJd;;AAY9B,MAAMC,UAAU,GAAG,CAAnB;;AAZ8B,mBAauCtB,QAAQ,CAC3E,UAD2E,EAE3EE,GAAG,CACAW,MADH,GAEGC,IAFH,GAGGC,QAHH,CAGY,mBAHZ,EAIGQ,GAJH,CAIOD,UAJP,6FAIsCA,UAJtC,uDAF2E,CAb/C;AAAA,MAafE,QAbe,cAatBP,KAbsB;AAAA,MAaSQ,MAbT,cAaLN,YAbK;AAAA,MAa6BO,KAb7B,cAaiBL,UAbjB;;AAsB9B,MAAMM,gBAAgB,GAAGxB,QAAQ,CAAC;AAAA,WAAMS,WAAW,CAACK,KAAZ,IAAoB,CAA1B;AAAA,GAAD,CAAjC;AACAb,EAAAA,KAAK,CAACuB,gBAAD,EAAmB,UAAAC,GAAG,EAAI;AAC9B,QAAGA,GAAH,EAAQ;AACPC,MAAAA,UAAU,CAAC,YAAM;AAChBjB,QAAAA,WAAW,CAACK,KAAZ,GAAoB,CAApB;AACA,OAFS,EAEP,IAFO,CAAV;AAGA;AACD,GANI,CAAL;AAOA,MAAOa,QAAQ,GAAGpB,YAAY;AAAA,uEAAC,iBAAOqB,MAAP;AAAA;AAAA;AAAA;AAAA;AAC9BC,cAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,MAArB;AAD8B;AAAA;AAAA,qBAGvBvB,KAAK,CAAC0B,QAAN,CAAe,YAAf,EAA6BH,MAA7B,CAHuB;;AAAA;AAI7BtB,cAAAA,MAAM,CAAC0B,IAAP,CAAY,GAAZ;AAJ6B;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;;AAAA;AAAA;AAAA;AAAA,MAA9B;AAUA,SAAO;AACNnB,IAAAA,KAAK,EAALA,KADM;AAENQ,IAAAA,QAAQ,EAARA,QAFM;AAGNN,IAAAA,MAAM,EAANA,MAHM;AAINO,IAAAA,MAAM,EAANA,MAJM;AAKNL,IAAAA,KAAK,EAALA,KALM;AAMNM,IAAAA,KAAK,EAALA,KANM;AAONI,IAAAA,QAAQ,EAARA,QAPM;AAQNnB,IAAAA,YAAY,EAAZA,YARM;AASNC,IAAAA,WAAW,EAAXA,WATM;AAUNe,IAAAA,gBAAgB,EAAhBA,gBAVM;AAWNnB,IAAAA,KAAK,EAALA;AAXM,GAAP;AAaA","sourcesContent":["import {useField, useForm} from \"vee-validate\";\nimport * as yup from \"yup\";\nimport {computed, watch} from \"vue\";\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router'\n\nexport function useLoginForm() {\n\tconst store = useStore()\n\tconst router = useRouter()\n\tconst { handleSubmit, isSubmitting, submitCount } = useForm()\n\tconst { value: email, errorMessage: eError, handleBlur: eBlur } = useField(\n\t\t\t'email',\n\t\t\tyup\n\t\t\t\t\t.string()\n\t\t\t\t\t.trim()\n\t\t\t\t\t.required('E-mail обязателен')\n\t\t\t\t\t.email('Укажите корректный E-mail')\n\t)\n\tconst MIN_LENGTH = 6\n\tconst { value: password, errorMessage: pError, handleBlur: pBlur } = useField(\n\t\t\t'password',\n\t\t\tyup\n\t\t\t\t\t.string()\n\t\t\t\t\t.trim()\n\t\t\t\t\t.required('Пароль обязателен')\n\t\t\t\t\t.min(MIN_LENGTH, `Пароль не менее ${MIN_LENGTH} символов`)\n\t)\n\n\tconst isToManyAttempts = computed(() => submitCount.value >=3 )\n\twatch(isToManyAttempts, val => {\n\t\tif(val) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tsubmitCount.value = 0\n\t\t\t}, 3000)\n\t\t}\n\t})\n\tconst  onSubmit = handleSubmit(async  values => {\n\t\tconsole.log('Form:', values)\n\t\ttry {\n\t\t\tawait store.dispatch('auth/login', values)\n\t\t\trouter.push('/')\n\t\t} catch (e) {\n\n\t\t}\n\n\t})\n\treturn {\n\t\temail,\n\t\tpassword,\n\t\teError,\n\t\tpError,\n\t\teBlur,\n\t\tpBlur,\n\t\tonSubmit,\n\t\tisSubmitting,\n\t\tsubmitCount,\n\t\tisToManyAttempts,\n\t\tstore\n\t}\n}\n"]}]}