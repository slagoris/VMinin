{"remainingRequest":"/Users/slag/Documents/GitHub/VMinin/14-practice/node_modules/babel-loader/lib/index.js!/Users/slag/Documents/GitHub/VMinin/14-practice/src/store/modules/auth.module.js","dependencies":[{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice/src/store/modules/auth.module.js","mtime":1657111317894},{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice/node_modules/cache-loader/dist/cjs.js","mtime":1656919257525},{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice/node_modules/babel-loader/lib/index.js","mtime":1656919258082}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3NsYWcvRG9jdW1lbnRzL0dpdEh1Yi9WTWluaW4vMTQtcHJhY3RpY2Uvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvc2xhZy9Eb2N1bWVudHMvR2l0SHViL1ZNaW5pbi8xNC1wcmFjdGljZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGVycm9yIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXJyb3InOwp2YXIgVE9LRU5fS0VZID0gJ2p3dC10b2tlbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBmdW5jdGlvbiBzdGF0ZSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUT0tFTl9LRVkpCiAgICB9OwogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdqd3QtdG9rZW4nLCB0b2tlbik7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUudG9rZW4gPSBudWxsOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShUT0tFTl9LRVkpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCBkaXNwYXRjaCwgdXJsLCBfeWllbGQkYXhpb3MkcG9zdCwgZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQsIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgdXJsID0gImh0dHBzOi8vaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tL3YxL2FjY291bnRzOnNpZ25JbldpdGhQYXNzd29yZD9rZXk9Ii5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9GQl9LRVkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCh1cmwsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGF5bG9hZCksIHt9LCB7CiAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlCiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF95aWVsZCRheGlvcyRwb3N0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkYXhpb3MkcG9zdC5kYXRhOwogICAgICAgICAgICAgICAgY29tbWl0KCdzZXRUb2tlbicsIGRhdGEuaWRUb2tlbik7CiAgICAgICAgICAgICAgICBjb21taXQoJ2NsZWFyTWVzc2FnZScsIG51bGwsIHsKICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnc2V0TWVzc2FnZScsIHsKICAgICAgICAgICAgICAgICAgdmFsdWU6IGVycm9yKF9jb250ZXh0LnQwLnJlc3BvbnNlLmRhdGEuZXJyb3IubWVzc2FnZSksCiAgICAgICAgICAgICAgICAgIHR5cGU6ICdkYW5nZXInCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0gLy8gY29uc29sZS5sb2coJ0RhdGEnLCBkYXRhLmlkVG9rZW4pCgogIH0sCiAgZ2V0dGVyczogewogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChfLCBnZXR0ZXJzKSB7CiAgICAgIHJldHVybiAhIWdldHRlcnMudG9rZW47CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/slag/Documents/GitHub/VMinin/14-practice/src/store/modules/auth.module.js"],"names":["axios","error","TOKEN_KEY","namespaced","state","token","localStorage","getItem","mutations","setToken","setItem","logout","removeItem","actions","login","payload","commit","dispatch","url","process","env","VUE_APP_FB_KEY","post","returnSecureToken","data","idToken","root","value","response","message","type","Error","getters","isAuthenticated","_"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,QAAoB,mBAApB;AACA,IAAMC,SAAS,GAAG,WAAlB;AACA,eAAe;AACdC,EAAAA,UAAU,EAAE,IADE;AAEdC,EAAAA,KAFc,mBAEN;AACP,WAAO;AACNC,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqBL,SAArB;AADD,KAAP;AAGA,GANa;AAOdM,EAAAA,SAAS,EAAE;AACVC,IAAAA,QADU,oBACDL,KADC,EACMC,KADN,EACa;AACtBD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACAC,MAAAA,YAAY,CAACI,OAAb,CAAqB,WAArB,EAAkCL,KAAlC;AACA,KAJS;AAKVM,IAAAA,MALU,kBAKHP,KALG,EAKI;AACbA,MAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;AACAC,MAAAA,YAAY,CAACM,UAAb,CAAwBV,SAAxB;AACA;AARS,GAPG;AAiBdW,EAAAA,OAAO,EAAE;AACFC,IAAAA,KADE,uBAC0BC,OAD1B,EACmC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAA7BC,gBAAAA,MAA6B,QAA7BA,MAA6B,EAArBC,QAAqB,QAArBA,QAAqB;AAAA;AAEnCC,gBAAAA,GAFmC,uFAEgDC,OAAO,CAACC,GAAR,CAAYC,cAF5D;AAAA;AAAA,uBAGlBrB,KAAK,CAACsB,IAAN,CAAWJ,GAAX,kCAAoBH,OAApB;AAA6BQ,kBAAAA,iBAAiB,EAAE;AAAhD,mBAHkB;;AAAA;AAAA;AAGjCC,gBAAAA,IAHiC,qBAGjCA,IAHiC;AAIzCR,gBAAAA,MAAM,CAAC,UAAD,EAAaQ,IAAI,CAACC,OAAlB,CAAN;AACAT,gBAAAA,MAAM,CAAC,cAAD,EAAiB,IAAjB,EAAwB;AAACU,kBAAAA,IAAI,EAAE;AAAP,iBAAxB,CAAN;AALyC;AAAA;;AAAA;AAAA;AAAA;AAOzCT,gBAAAA,QAAQ,CAAC,YAAD,EAAe;AACtBU,kBAAAA,KAAK,EAAE1B,KAAK,CAAC,YAAE2B,QAAF,CAAWJ,IAAX,CAAgBvB,KAAhB,CAAsB4B,OAAvB,CADU;AAEtBC,kBAAAA,IAAI,EAAE;AAFgB,iBAAf,EAGL;AAACJ,kBAAAA,IAAI,EAAE;AAAP,iBAHK,CAAR;AAPyC,sBAWnC,IAAIK,KAAJ,EAXmC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAa1C,KAdO,CAeR;;AAfQ,GAjBK;AAkCdC,EAAAA,OAAO,EAAE;AACR3B,IAAAA,KADQ,iBACFD,KADE,EACK;AACZ,aAAOA,KAAK,CAACC,KAAb;AACA,KAHO;AAIR4B,IAAAA,eAJQ,2BAIQC,CAJR,EAIWF,OAJX,EAIoB;AAC3B,aAAO,CAAC,CAACA,OAAO,CAAC3B,KAAjB;AACA;AANO;AAlCK,CAAf","sourcesContent":["import axios from \"axios\";\nimport {error} from '../../utils/error'\nconst TOKEN_KEY = 'jwt-token'\nexport default {\n\tnamespaced: true,\n\tstate() {\n\t\treturn {\n\t\t\ttoken: localStorage.getItem(TOKEN_KEY)\n\t\t}\n\t},\n\tmutations: {\n\t\tsetToken(state, token) {\n\t\t\tstate.token = token\n\t\t\tlocalStorage.setItem('jwt-token', token)\n\t\t},\n\t\tlogout(state) {\n\t\t\tstate.token = null\n\t\t\tlocalStorage.removeItem(TOKEN_KEY)\n\t\t}\n\t},\n\tactions: {\n\t\tasync login({ commit, dispatch }, payload) {\n\t\t\ttry {\n\t\t\t\tconst url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${process.env.VUE_APP_FB_KEY}`\n\t\t\t\tconst { data } = await axios.post(url, {...payload, returnSecureToken: true})\n\t\t\t\tcommit('setToken', data.idToken)\n\t\t\t\tcommit('clearMessage', null , {root: true})\n\t\t\t} catch (e) {\n\t\t\t\tdispatch('setMessage', {\n\t\t\t\t\tvalue: error(e.response.data.error.message),\n\t\t\t\t\ttype: 'danger'\n\t\t\t\t}, {root: true})\n\t\t\t\tthrow new Error()\n\t\t\t}\n\t\t}\n\t\t// console.log('Data', data.idToken)\n\t},\n\tgetters: {\n\t\ttoken(state) {\n\t\t\treturn state.token\n\t\t},\n\t\tisAuthenticated(_, getters) {\n\t\t\treturn !!getters.token\n\t\t}\n\t}\n}\n"]}]}