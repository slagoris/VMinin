{"remainingRequest":"/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/node_modules/babel-loader/lib/index.js!/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/src/views/Auth.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/src/views/Auth.vue","mtime":1657443397008},{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/node_modules/cache-loader/dist/cjs.js","mtime":1657261957447},{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/node_modules/babel-loader/lib/index.js","mtime":1657261957881},{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/node_modules/cache-loader/dist/cjs.js","mtime":1657261957447},{"path":"/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/node_modules/vue-loader-v16/dist/index.js","mtime":1657261957769}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3NsYWcvRG9jdW1lbnRzL0dpdEh1Yi9WTWluaW4vMTQtcHJhY3RpY2Utb3B0aW9ucy1hcGkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBlcnJvciB9IGZyb20gIi4uL3V0aWxzL2Vycm9yIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBdXRoIiwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5Lm1lc3NhZ2UpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldE1lc3NhZ2UnLCB7CiAgICAgICAgdmFsdWU6IGVycm9yKHRoaXMuJHJvdXRlLnF1ZXJ5Lm1lc3NhZ2UpLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogJycsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgZXJyb3JzOiB7CiAgICAgICAgZW1haWw6IG51bGwsCiAgICAgICAgcGFzc3dvcmQ6IG51bGwKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHZhbGlkRW1haWw6IGZ1bmN0aW9uIHZhbGlkRW1haWwoZW1haWwpIHsKICAgICAgdmFyIHJlID0gL14oKFtePD4oKVtcXVxcLiw7OlxzQCJdKyhcLltePD4oKVtcXVxcLiw7OlxzQCJdKykqKXwoIi4rIikpQCgoXFtbMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XF0pfCgoW2EtekEtWlwtMC05XStcLikrW2EtekEtWl17Mix9KSkkLzsKICAgICAgcmV0dXJuIHJlLnRlc3QoZW1haWwpOwogICAgfSwKICAgIGZvcm1Jc1ZhbGlkOiBmdW5jdGlvbiBmb3JtSXNWYWxpZCgpIHsKICAgICAgdmFyIGlzVmFsaWQgPSB0cnVlOwoKICAgICAgaWYgKCF0aGlzLmVtYWlsLmxlbmd0aCkgewogICAgICAgIHRoaXMuZXJyb3JzLmVtYWlsID0gJ0VtYWlsINC+0LHRj9C30LDRgtC10LvQtdC9JzsKICAgICAgICBpc1ZhbGlkID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMudmFsaWRFbWFpbCh0aGlzLmVtYWlsKSkgewogICAgICAgIHRoaXMuZXJyb3JzLmVtYWlsID0gJ9CS0LLQtdC00LjRgtC1INC60L7RgNGA0LXQutGC0L3Ri9C5INCw0LTRgNC10YEg0Y3Qu9C10LrRgtGA0L7QvdC90L7QuSDQv9C+0YfRgtGLJzsKICAgICAgICBpc1ZhbGlkID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvcnMuZW1haWwgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoIXRoaXMucGFzc3dvcmQubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5lcnJvcnMucGFzc3dvcmQgPSAn0J/QsNGA0L7Qu9GMINC+0LHRj9C30LDRgtC10LvQtdC9JzsKICAgICAgICBpc1ZhbGlkID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5wYXNzd29yZC5sZW5ndGggPD0gNSAmJiB0aGlzLnBhc3N3b3JkLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmVycm9ycy5wYXNzd29yZCA9ICfQn9Cw0YDQvtC70Ywg0LTQvtC70LbQtdC9INCx0YvRgtGMINC90LUg0LzQtdC90YzRiNC1IDYg0YHQuNC80LLQvtC70L7Qsic7CiAgICAgICAgaXNWYWxpZCA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3JzLnBhc3N3b3JkID0gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzVmFsaWQ7CiAgICB9LAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZm9ybURhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5mb3JtSXNWYWxpZCgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgICBmb3JtRGF0YSA9IHt9OwogICAgICAgICAgICAgICAgZm9ybURhdGEuZW1haWwgPSBfdGhpcy5lbWFpbDsKICAgICAgICAgICAgICAgIGZvcm1EYXRhLnBhc3N3b3JkID0gX3RoaXMucGFzc3dvcmQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRm9ybTogJyArIGZvcm1EYXRhKTsKICAgICAgICAgICAgICAgIF90aGlzLmVtYWlsID0gJyc7CiAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZCA9ICcnOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnYXV0aC9sb2dpbicsIGZvcm1EYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTRdXSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/slag/Documents/GitHub/VMinin/14-practice-options-api/src/views/Auth.vue"],"names":[],"mappings":";;AAyBA,SAAQ,KAAR,QAAoB,gBAApB;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,MADQ;AAEd,EAAA,OAFc,qBAEJ;AACT,QAAG,KAAK,MAAL,CAAY,KAAZ,CAAkB,OAArB,EAA8B;AAC7B,WAAK,MAAL,CAAY,QAAZ,CAAqB,YAArB,EAAmC;AAClC,QAAA,KAAK,EAAE,KAAK,CAAC,KAAK,MAAL,CAAY,KAAZ,CAAkB,OAAnB,CADsB;AAElC,QAAA,IAAI,EAAE;AAF4B,OAAnC;AAID;AACA,GATa;AAUd,EAAA,IAVc,kBAUP;AACN,WAAO;AACN,MAAA,KAAK,EAAE,EADD;AAEN,MAAA,QAAQ,EAAE,EAFJ;AAGN,MAAA,MAAM,EAAE;AACP,QAAA,KAAK,EAAE,IADA;AAEP,QAAA,QAAQ,EAAE;AAFH;AAHF,KAAP;AAQA,GAnBa;AAoBd,EAAA,OAAO,EAAE;AACR,IAAA,UADQ,sBACG,KADH,EACU;AACjB,UAAI,EAAC,GAAI,uJAAT;AACA,aAAO,EAAE,CAAC,IAAH,CAAQ,KAAR,CAAP;AACA,KAJO;AAKR,IAAA,WALQ,yBAKM;AACb,UAAI,OAAM,GAAI,IAAd;;AACA,UAAI,CAAC,KAAK,KAAL,CAAW,MAAhB,EAAwB;AACvB,aAAK,MAAL,CAAY,KAAZ,GAAoB,kBAApB;AACA,QAAA,OAAM,GAAI,KAAV;AACD,OAHA,MAGO,IAAI,CAAC,KAAK,UAAL,CAAgB,KAAK,KAArB,CAAL,EAAkC;AACxC,aAAK,MAAL,CAAY,KAAZ,GAAoB,4CAApB;AACA,QAAA,OAAM,GAAI,KAAV;AACD,OAHO,MAIF;AACJ,aAAK,MAAL,CAAY,KAAZ,GAAoB,IAApB;AACD;;AAEA,UAAI,CAAC,KAAK,QAAL,CAAc,MAAnB,EAA2B;AAC1B,aAAK,MAAL,CAAY,QAAZ,GAAuB,mBAAvB;AACA,QAAA,OAAM,GAAI,KAAV;AACD,OAHA,MAGO,IAAI,KAAK,QAAL,CAAc,MAAd,IAAwB,CAAxB,IAA6B,KAAK,QAAL,CAAc,MAAd,GAAuB,CAAxD,EAA2D;AACjE,aAAK,MAAL,CAAY,QAAZ,GAAuB,yCAAvB;AACA,QAAA,OAAM,GAAI,KAAV;AACD,OAHO,MAGA;AACN,aAAK,MAAL,CAAY,QAAZ,GAAuB,IAAvB;AACD;;AACA,aAAO,OAAP;AACA,KA5BO;AA6BF,IAAA,QA7BE,sBA6BS;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEZ,KAAI,CAAC,WAAL,EAFY;AAAA;AAAA;AAAA;;AAAA;AAIV,gBAAA,QAJU,GAIC,EAJD;AAKd,gBAAA,QAAQ,CAAC,KAAT,GAAiB,KAAI,CAAC,KAAtB;AACA,gBAAA,QAAQ,CAAC,QAAT,GAAoB,KAAI,CAAC,QAAzB;AACA,gBAAA,OAAO,CAAC,GAAR,CAAY,WAAY,QAAxB;AACA,gBAAA,KAAI,CAAC,KAAL,GAAa,EAAb;AACA,gBAAA,KAAI,CAAC,QAAL,GAAgB,EAAhB;AATc;AAAA,uBAWP,KAAI,CAAC,MAAL,CAAY,QAAZ,CAAqB,YAArB,EAAmC,QAAnC,CAXO;;AAAA;AAAA;AAAA,uBAYR,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB,CAZQ;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBhB;AA7CO;AApBK,CAAf","sourcesContent":["<template>\n\t<form class=\"card\" ref=\"authForm\" @submit.prevent=\"onSubmit\" novalidate=\"true\">\n\t\t<h1>Войти в систему</h1>\n\n\t\t<div :class=\"['form-control', {invalid: errors.email}]\">\n\t\t\t<label for=\"email\">Email</label>\n\t\t\t<input type=\"email\" id=\"email\" autocomplete=\"on\" v-model=\"email\" @blur=\"formIsValid\">\n\t\t\t<small v-if=\"errors.email\">{{ errors.email }}</small>\n\t\t</div>\n\n\t\t<div :class=\"['form-control', {invalid: errors.password}]\">\n\t\t\t<label for=\"password\">Пароль</label>\n\t\t\t<input type=\"password\" id=\"password\" autocomplete=\"off\" v-model=\"password\" @blur=\"formIsValid\" @input=\"formIsValid\">\n\t\t\t<small v-if=\"errors.password\">{{ errors.password }}</small>\n\t\t</div>\n\t\t<button\n\t\t\t\tclass=\"btn primary\"\n\t\t\t\ttype=\"submit\"\n\t\t>Войти\n\t\t</button>\n\t</form>\n</template>\n\n<script>\n\nimport {error} from \"../utils/error\";\n\nexport default {\n\tname: \"Auth\",\n\tmounted() {\n\t\tif(this.$route.query.message) {\n\t\t\tthis.$store.dispatch('setMessage', {\n\t\t\t\tvalue: error(this.$route.query.message),\n\t\t\t\ttype: 'warning'\n\t\t\t})\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\temail: '',\n\t\t\tpassword: '',\n\t\t\terrors: {\n\t\t\t\temail: null,\n\t\t\t\tpassword: null\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tvalidEmail(email) {\n\t\t\tlet re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n\t\t\treturn re.test(email);\n\t\t},\n\t\tformIsValid() {\n\t\t\tlet isValid = true\n\t\t\tif (!this.email.length) {\n\t\t\t\tthis.errors.email = 'Email обязателен'\n\t\t\t\tisValid = false\n\t\t\t} else if (!this.validEmail(this.email)) {\n\t\t\t\tthis.errors.email = 'Введите корректный адрес электронной почты'\n\t\t\t\tisValid = false\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.errors.email = null\n\t\t\t}\n\n\t\t\tif (!this.password.length) {\n\t\t\t\tthis.errors.password = 'Пароль обязателен'\n\t\t\t\tisValid = false\n\t\t\t} else if (this.password.length <= 5 && this.password.length > 0) {\n\t\t\t\tthis.errors.password = 'Пароль должен быть не меньше 6 символов'\n\t\t\t\tisValid = false\n\t\t\t} else {\n\t\t\t\tthis.errors.password = null\n\t\t\t}\n\t\t\treturn isValid\n\t\t},\n\t\tasync onSubmit() {\n\n\t\t\tif (this.formIsValid()) {\n\t\t\t\ttry {\n\t\t\t\t\tlet formData = {}\n\t\t\t\t\tformData.email = this.email\n\t\t\t\t\tformData.password = this.password\n\t\t\t\t\tconsole.log('Form: ' +  formData)\n\t\t\t\t\tthis.email = ''\n\t\t\t\t\tthis.password = ''\n\n\t\t\t\t\tawait  this.$store.dispatch('auth/login', formData)\n\t\t\t\t\tawait this.$router.push('/')\n\t\t\t\t} catch (e) {\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n"],"sourceRoot":""}]}